﻿@{
    bool auth = false;
    if (ViewData.TryGetValue("ParentLayout", out var parentLayout))
    {
        Layout = (string)parentLayout!;
    }
    else
    {
        auth = User.IsInRole("Admin") || User.IsInRole("Manager");
        auth = true;
        Layout = auth ? "/Views/Shared/Admin/_Layout.cshtml" : "/Views/Shared/_Layout.cshtml";
    }
}

@if (auth)
{
    @RenderBody()

    @section TopBar {
    @await Html.PartialAsync("/Views/Shared/Admin/_TopBar.cshtml")
    }

    @section SideBar {
        <partial name="/Areas/Identity/Pages/Account/Manage/_ManageNav.cshtml" />
    }
}
else
{
    <h1>Quản lý tài khoản</h1>

    <div>
        <h2>Thiết lập thông tin tài khoản của bạn!</h2>
        <hr />
        <div class="row">
            <div class="col-md-3">
                <partial name="_ManageNav" />
            </div>
            <div class="col-md-9">
                @RenderBody()
            </div>
        </div>
    </div>
}
@section Scripts {
    @RenderSection("Scripts", required: false)
}